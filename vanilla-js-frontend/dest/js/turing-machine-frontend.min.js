const bpc={};function getParameterByName(e){const i=RegExp(`[?&]${e}=([^&]*)`).exec(window.location.search);return i&&decodeURIComponent(i[1].replace(/\+/g," "))}function getMajorPixiVersion(e){let i=6;return"v"===e.substr(0,1)&&(i=parseInt(e.substr(1,1),10)),i}function reload(){bpc.editor&&(bpc.exampleSourceCode=bpc.editor.getValue()),bpc.generateIFrameContent()}function removeAllIFrames(){const e=document.querySelectorAll("iframe, .frame-placeholder");for(let i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i])}jQuery(document).ready((e=>{window.onpopstate=function(i){bpc.pixiVersionString=getParameterByName("v")||"v6.x",bpc.generateIFrameContent(),e(".select-group .select li.selected").removeClass("selected");const t=e(`.select-group .select li[data-val="${bpc.pixiVersionString}"]`);t.addClass("selected"),e(".select-group .select .current").text(t.text()),e(".main-content").animate({scrollTop:0},200)},bpc.allowedVersions=[6,5],bpc.pixiVersionString=getParameterByName("v")||"v6.x",bpc.majorPixiVersion=getMajorPixiVersion(bpc.pixiVersionString),bpc.exampleUrl="",bpc.exampleFilename="",bpc.exampleTitle="",bpc.exampleSourceCode="",bpc.exampleRequiredPlugins=[],bpc.exampleValidVersions=[],bpc.editorOptions={mode:"javascript",lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,viewportMargin:1/0,lineWrapping:!0},bpc.clickType="click",bpc.animTime=.15,bpc.autoPlay=!0,bpc.packagesManifest={},bpc.init=function(){const i=bpc.embedMode();e.getJSON("examples/manifest.json",(i=>{const t=Object.keys(i);for(let a=0;a<t.length;a++){let n=`<span class="section" data-section="${t[a]}">${t[a]}</span><ul data-section="${t[a]}">`;const s=i[t[a]];for(let e=0;e<s.length;e++){const i=void 0!==s[e].plugins?s[e].plugins.join(","):"",t=void 0!==s[e].validVersions?s[e].validVersions.join(","):"";n+=`<li data-src="${s[e].entry}" data-plugins="${i}" data-validVersions="${t}">${s[e].title}</li>`}n+="</ul>",e(".main-menu").append(n)}bpc.initNav()})),i||e.getJSON("https://api.github.com/repos/pixijs/pixi.js/git/refs/tags",(i=>{let t=[];bpc.allowedVersions.forEach((e=>{let a=i.filter((i=>0===i.ref.indexOf(`refs/tags/v${e}`)));a.length>5&&(a=a.slice(-5)),t=t.concat(a)})),t=t.map((e=>e.ref.replace("refs/tags/","")));for(let i=0;i<t.length;i++)e(".select-group .select ul").append(`<li data-val="${t[i]}">${t[i]}</li>`);e.getJSON("https://api.github.com/repos/pixijs/pixi.js/git/refs/heads",(i=>{i=i.filter((e=>0===e.ref.indexOf("refs/heads/next"))).map((e=>e.ref.replace("refs/heads/","")));for(let t=0;t<i.length;t++)e(".select-group .select ul").append(`<li data-val="${i[t]}">${i[t]}</li>`);const t=e(`.select-group .select li[data-val="${bpc.pixiVersionString}"]`);t.addClass("selected"),e(".select-group .select .current").text(t.text())}))}))},bpc.embedMode=function(){if(!getParameterByName("lite")&&!getParameterByName("embed"))return!1;const i=e("body"),t=e(".reload");i.addClass("embed").removeClass("normal"),e("#redirect").attr("href",window.location.href.replace(window.location.search,"")),bpc.autoPlay=!!getParameterByName("autoplay"),bpc.autoPlay?i.addClass("autoplay"):t.on(bpc.clickType,(function(){e(this).addClass("hidden")})),getParameterByName("noredirect")&&i.addClass("noredirect");if(getParameterByName("showcode")){const a=e(".main-tab");i.addClass(a.filter(".selected").data("view")),a.on(bpc.clickType,(function(){a.removeClass("selected"),e(this).addClass("selected"),a.each((function(){i.removeClass(this.dataset.view)})),i.addClass(this.dataset.view),t.addClass("hidden"),reload()}))}else i.addClass("nocode");return!0},bpc.initNav=function(){if(e(".main-menu .section").on(bpc.clickType,(function(){e(this).next("ul").slideToggle(250),e(this).toggleClass("open")})),e(".main-menu").on("click",(function(){e(".main-menu li.selected").removeClass("selected"),e(this).addClass("selected"),bpc.closeMobileNav(),bpc.exampleUrl="examples/js/sprite/basic.js",bpc.exampleFilename="basic.js",bpc.exampleRequiredPlugins=[],bpc.exampleValidVersions=[6,5],e.ajax({url:"examples/js/sprite/basic.js",dataType:"text",success(e){bpc.exampleSourceCode=e,bpc.loadPackages()},error(e){console.log("examples/js/sprite/basic.js"),console.log(e)}})})),bpc.loadPackages=function(){e.getJSON("examples/packages.json",(e=>{bpc.packagesManifest=e,bpc.autoPlay&&bpc.generateIFrameContent()}))},bpc.generateIFrameContent=function(){const i=bpc.packagesManifest;removeAllIFrames(),e("#example").html('<iframe id="preview" src="blank.html"></iframe>'),e(".CodeMirror").remove(),e(".main-content #code").html(bpc.exampleSourceCode);let t="";t="local"===bpc.pixiVersionString?"dist/pixi.js":`https://d157l7jdn8e5sf.cloudfront.net/${bpc.pixiVersionString}/pixi-legacy.js`;let a="<!DOCTYPE html><html><head><style>";a+="body,html{margin:0px;height:100%;overflow:hidden;}canvas{width:100%;height:100%;}",a+="</style></head><body>",a+='<script src="https://code.jquery.com/jquery-3.3.1.min.js"><\/script>',a+=`<script src="${t}"><\/script>`;const n=[];for(let e=0;e<bpc.exampleRequiredPlugins.length;e++){const t=bpc.exampleRequiredPlugins[e],s=i[t];if(s){const e=`${s.vendor?s.vendor.replace("{version}",bpc.pixiVersionString):`https://cdn.jsdelivr.net/npm/${t}@${s.version||"latest"}/`}${s.script}`;a+=`<script src="${e}"><\/script>`,n.push(`<a href="${e}">${t}</a>`)}else a+=`<script src="pixi-plugins/${bpc.exampleRequiredPlugins[e]}.js"><\/script>`,n.push(t)}bpc.editor=CodeMirror.fromTextArea(document.getElementById("code"),bpc.editorOptions),bpc.exampleRequiredPlugins.length?e("#code-header").html(`Example Code (plugins used: ${n.join(", ")})`):e("#code-header").text("Example Code"),!bpc.exampleValidVersions.length||bpc.exampleValidVersions.indexOf(bpc.majorPixiVersion)>-1?(e("#example-title").html(bpc.exampleTitle),a+=`<script>window.onload = function(){${bpc.exampleSourceCode}}<\/script></body></html>`,e(".example-frame").show()):(e("#example-title").html(`${bpc.exampleTitle}<br><br><br><br><br><br><br>The selected version of PixiJS does not work with this example.<br><br>Selected version: v${bpc.majorPixiVersion}<br><br>Required version: v${bpc.exampleValidVersions.toString()}<br><br><br><br><br>`),e(".example-frame").hide());const s=document.getElementById("preview"),c=s.contentDocument||s.contentWindow.document;c.open(),c.write(a),c.close()},bpc.openMobileNav=function(){TweenMax.to("#line1",bpc.animTime,{y:0,ease:Linear.easeNone}),TweenMax.to("#line2",0,{alpha:0,ease:Linear.easeNone,delay:bpc.animTime}),TweenMax.to("#line3",bpc.animTime,{y:0,ease:Linear.easeNone}),TweenMax.to("#line1",bpc.animTime,{rotation:45,ease:Quart.easeOut,delay:bpc.animTime}),TweenMax.to("#line3",bpc.animTime,{rotation:-45,ease:Quart.easeOut,delay:bpc.animTime}),e(".main-nav").addClass("mobile-open")},bpc.closeMobileNav=function(){TweenMax.to("#line1",bpc.animTime,{rotation:0,ease:Linear.easeNone,delay:0}),TweenMax.to("#line3",bpc.animTime,{rotation:0,ease:Linear.easeNone,delay:0}),TweenMax.to("#line2",0,{alpha:1,ease:Quart.easeOut,delay:bpc.animTime}),TweenMax.to("#line1",bpc.animTime,{y:-8,ease:Quart.easeOut,delay:bpc.animTime}),TweenMax.to("#line3",bpc.animTime,{y:8,ease:Quart.easeOut,delay:bpc.animTime}),e(".main-nav").removeClass("mobile-open")},bpc.updateMenu=function(){e(".main-nav .main-menu ul li").each((function(){const i=e(this).attr("data-validVersions");-1===(""===i?[6,5]:i.split(",").map((e=>parseInt(e,10)))).indexOf(bpc.majorPixiVersion)?e(this).addClass("invalid"):e(this).removeClass("invalid")}))},bpc.updateMenu(),e(".main-header .hamburger").on(bpc.clickType,(i=>(i.preventDefault(),e(".main-nav").hasClass("mobile-open")?bpc.closeMobileNav():bpc.openMobileNav(),!1))),""!==window.location.hash){const i=window.location.hash.replace("#/","").split("/");i.length>1&&("mesh"===i[0]&&(i[0]="mesh-and-shaders"),e(`.main-menu .section[data-section="${i[0]}"]`).length>0&&(e(`.main-menu .section[data-section="${i[0]}"]`).trigger(bpc.clickType),e(`.main-menu .section[data-section="${i[0]}"]`).next().find(`li[data-src="${i[1]}"]`).length>0&&e(`.main-menu .section[data-section="${i[0]}"]`).next().find(`li[data-src="${i[1]}"]`).trigger(bpc.clickType)))}else e(".main-menu .section").eq(0).trigger(bpc.clickType),e(".main-menu li").eq(0).trigger(bpc.clickType);e(".select-group").on(bpc.clickType,(function(){e(this).find(".select").hasClass("open")?(e(this).find(".select").removeClass("open"),e(this).find("ul").slideUp(150)):(e(this).find(".select").addClass("open"),e(this).find("ul").slideDown(150))})),e(".select-group .select").on(bpc.clickType,"li",(function(){e(this).hasClass("selected")||(e(".select-group .select li.selected").removeClass("selected"),e(this).addClass("selected"),e(".select-group .select .current").text(e(this).text()),bpc.pixiVersionString=e(this).attr("data-val"),bpc.majorPixiVersion=getMajorPixiVersion(bpc.pixiVersionString),window.history.pushState(bpc.pixiVersionString,null,`?v=${bpc.pixiVersionString}${window.location.hash}`),bpc.updateMenu(),bpc.generateIFrameContent(),e(".main-content").animate({scrollTop:0},200))})),e(".footer .download").on(bpc.clickType,(()=>{bpc.saveToDisk(bpc.exampleUrl,bpc.exampleFilename)})),e(".reload").on(bpc.clickType,reload)},bpc.saveToDisk=function(e,i){if(window.ActiveXObject){if(window.ActiveXObject&&document.execCommand){const t=window.open(e,"_blank");t.document.close(),t.document.execCommand("SaveAs",!0,i||e),t.close()}}else{const t=document.createElement("a");t.href=e,t.target="_blank",t.download=i||"unknown";const a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});t.dispatchEvent(a),(window.URL||window.webkitURL).revokeObjectURL(t.href)}},bpc.init()}));